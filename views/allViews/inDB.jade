extends ./../index.jade

block inDB
    div(class="mainContainer")
        table(border= 1, class="navCompetition")
            thead
                th.navFirstElement 
                    a(href="/") Main
                th
                    a(href='/competitions') Competitions
                th
                    a(href='https://vk.com/vlad_ork') VK
        div(class="col-xs-12")
            h2(style="text-align: center;")
                span(class="glyphicon glyphicon glyphicon-star")
                    b(style="word-spacing: -20px;") #{inDB[0].TITLE} 
                br
                small #{inDB[0].PLACE}, #{inDB[0].DATECOMPETITION}
        table(border= 1, class="mainTable")
            thead
                th.topTable
                    a(href='/competition/#{inDB[0].IDCOMPETITION}/info') Info
                th.topTable  
                    a(href='/competition/#{inDB[0].IDCOMPETITION}/details') Applications(#{inDB[0].COUNT})
                th.topTable
                    a(href='/competition/#{inDB[0].IDCOMPETITION}/registration') Registration
        
        form(id='regForm' class="form-horizontal" name='form_info' 
            action="/competition/#{inDB[0].IDCOMPETITION}/registration/inDB/answer" method="post")
            div(class="form-group")
                div(class="col-sm-5")

                    label(for="partner") Partner:
                    select(class="form-control selectpicker", name="Partner", data-live-search="true", title='Choose: partner', required)
                        each partner in inDB.Partners
                            option(value='#{partner.CODEPARTNER}' data-tokens='#{partner.NAMEPARTNER} #{partner.SURNAMEPARTNER}') #{partner.NAMEPARTNER} #{partner.SURNAMEPARTNER}, #{partner.COUNTRY}

                    label(for="shePartner") Shepartner:
                    select(class="form-control selectpicker", name="Shepartner",
                        data-live-search="true", title='Choose: shepartner', required)
                        each shepartner in inDB.ShePartners
                            option(value='#{shepartner.CODESHEPARTNER}' data-tokens='#{shepartner.NAMESHEPARTNER} #{shepartner.SURNAMESHEPARTNER}') #{shepartner.NAMESHEPARTNER} #{shepartner.SURNAMESHEPARTNER}, #{shepartner.COUNTRY}

                    label(for="coach") Coach:
                    select(class="form-control selectpicker", name="Coach", data-live-search="true", title='Choose: coach', required)
                        each coach in inDB.Coaches
                            option(value='#{coach.CODECOACH}' data-tokens='#{coach.NAMECOACH} #{coach.SURNAMECOACH}') #{coach.NAMECOACH} #{coach.SURNAMECOACH}, #{coach.COUNTRY}

                    label(for="class") Category, Class, Program:
                    select(class="form-control selectpicker", name="Class", title='Choose: category, class, program', required)
                        each competitionClass in inDB.Classes
                            option(value='#{competitionClass.CATEGORYNAME}_#{competitionClass.CLASSNAME}_#{competitionClass.TYPEOFPROGRAM}') #{competitionClass.CATEGORYNAME}, #{competitionClass.CLASSNAME}, #{competitionClass.TYPEOFPROGRAM}
            button(id='couple', type="submit", class="btn btn-default") Submit
    script.
        //- document.getElementById("couple").addEventListener("click", partner);
        //- function partner() {
        //-     var inputPartner = document.getElementById("partner");
        //-     console.log(inputPartner.value);
        //-     inputPartner.oninput = function() {
        //-         var input = inputPartner.value.split("_");
        //-         var values = new Array();
        //-         for(i in input) {
        //-             var j = ['CODEPARTNER', 'NAMEPARTNER', 'SURNAMEPARTNER', 'COUNTRY'];
        //-             values[j[i]] = input[i];
        //-         }
        //-         console.log(values);
        //-         //document.getElementById('partner').innerHTML = values;
        //-     }
        //- }
        //- window.partner = function() {
            //- var inputPartner = document.getElementById("partner");
            //- inputPartner.oninput = function() {
            //-     var input = inputPartner.value.split("_");
            //-     var values = new Array();
            //-     for(i in input) {
            //-         var j = ['CODEPARTNER', 'NAMEPARTNER', 'SURNAMEPARTNER', 'COUNTRY'];
            //-         values[j[i]] = input[i];
            //-     }
            //-     console.log(values);
            //-     document.getElementById('partner').innerHTML = values;
            //- };
        //- }
//- имя только буквы пробел Фамилия, Страна